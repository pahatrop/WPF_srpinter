<UserControl x:Class="WPF_sprinter.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:self="clr-namespace:WPF_sprinter"
        MinHeight="300">
    <Grid>

        <Grid.Resources>
            <Style x:Key="ButtonStyle" TargetType="Button">
                <Setter Property="Control.Background" Value="#DCDCDC"/>
                <Setter Property="Control.Margin" Value="5,10"/>
                <Setter Property="Control.Padding" Value="15,10"/>
                <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="Control.Background" Value="#000"/>
                    </Trigger>
                </Style.Triggers>
            </Style>
        </Grid.Resources>
        
        <Grid.RowDefinitions>
            <RowDefinition MinHeight="600"/>
        </Grid.RowDefinitions>

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="500" MinWidth="400" MaxWidth="600"/>
            <ColumnDefinition Width="900" MinWidth="500"/>
        </Grid.ColumnDefinitions>

        <Border Grid.RowSpan="2" Grid.Column="0" Margin="0">
            <DockPanel LastChildFill="true">
                <StackPanel Orientation="Horizontal" DockPanel.Dock="Bottom" Background="#eee">
                    <TextBox Width="200" Margin="10" BorderBrush="#aaa" Padding="10" VerticalAlignment="Center" Foreground="#444" FontSize="14" FontFamily="Sans">
                        Universities filter...
                    </TextBox>
                    <Image DockPanel.Dock="Top" Height="30" Visibility="{Binding Preloader1}" Source="pack://application:,,/source/loader.png" Margin="0"/>
                    <Button IsEnabled="{Binding canExecuteAddUniversity}" Command="{Binding Path=actionShowCreateUniversity , Mode=OneWay}" Content="Create" Style="{StaticResource ButtonStyle}"/>
                    <Button IsEnabled="{Binding canExecuteEditUniversity}" Command="{Binding Path=actionShowEditUniversity , Mode=OneWay}" Content="Edit" Style="{StaticResource ButtonStyle}"/>
                    <Button IsEnabled="{Binding canExecuteRemoveUniversity}" Command="{Binding Path=actionRemoveUniversity , Mode=OneWay}" Content="Remove" Style="{StaticResource ButtonStyle}"/>

                </StackPanel>

                <TreeView Padding="5" DockPanel.Dock="Top" BorderBrush="#fff" x:Name="tree" ItemsSource="{Binding AllUniversities}">
                    <TreeView.ItemTemplate SelectedItem="{Binding SelectedUniversity}">
                        <HierarchicalDataTemplate ItemsSource="{Binding Path=Departments}">
                            <TextBlock Padding="5" Margin="5" FontWeight="Bold" Text="{Binding Path=Name}" />
                            <HierarchicalDataTemplate.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Padding="5" Margin="5" Text="{Binding Path=Name}"/>
                                </DataTemplate>
                            </HierarchicalDataTemplate.ItemTemplate>
                        </HierarchicalDataTemplate>
                    </TreeView.ItemTemplate>
                </TreeView>

            </DockPanel>
        </Border>

        <GridSplitter Grid.Column="1" VerticalAlignment="Stretch" HorizontalAlignment="Left" Width="5" Margin="1,0,0,0" />

        <Border Grid.Column="1" Margin="10,3,0,0">
            <DockPanel LastChildFill="true">
                <StackPanel Orientation="Horizontal" DockPanel.Dock="Top" Background="#eee">
                    <TextBlock DockPanel.Dock="Top" Width="200" Margin="3" Padding="5,5,5,0" Foreground="#444" FontSize="14" FontFamily="Sans">
                        Students list
                    </TextBlock>
                    <Image DockPanel.Dock="Top" Width="18" Height="18" Visibility="{Binding Preloader3}" Source="pack://application:,,/source/loader.png" Margin="0"/>
                    <Button IsEnabled="{Binding canExecuteAddStudent}" Command="{Binding Path=actionShowCreateStudent , Mode=OneWay}">
                        <Button.Template>
                            <ControlTemplate>
                                <TextBlock FontSize="20" Padding="5,0" FontWeight="Bold" Foreground="#fff">+</TextBlock>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                    <Button IsEnabled="{Binding canExecuteEditStudent}" Command="{Binding Path=actionShowEditStudent , Mode=OneWay}">
                        <Button.Template>
                            <ControlTemplate>
                                <TextBlock FontSize="20" Padding="5,0" FontWeight="Bold" Foreground="#fff">~</TextBlock>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                    <Button IsEnabled="{Binding canExecuteRemoveStudent}" Command="{Binding Path=actionRemoveStudent , Mode=OneWay}">
                        <Button.Template>
                            <ControlTemplate>
                                <TextBlock  FontSize="20" Padding="5,0" FontWeight="Bold" Foreground="#fff">-</TextBlock>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                    
                </StackPanel>
                <ListBox DockPanel.Dock="Left" ItemsSource="{Binding AllStudents}" SelectedIndex="{Binding SelectedStudent, UpdateSourceTrigger=PropertyChanged}" BorderBrush="#fff" Margin="2">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <Grid Margin="3" Width="300">
                                <Grid.RowDefinitions>
                                    <RowDefinition/>
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="90"/>
                                    <ColumnDefinition/>
                                </Grid.ColumnDefinitions>
                                <Image Grid.Column="0" Grid.Row="0" Source="{Binding Path=Avatar}" Width="80" Height="80"/>
                                <TextBlock Margin="10,0,0,0" Grid.Column="1" Grid.Row="0" FontSize="16" Text="{Binding Path=Firstname}" Foreground="#073784"/>
                                <TextBlock Margin="10,30,0,0" Grid.Column="1" Grid.Row="0" FontSize="16" Text="{Binding Path=Lastname}" Foreground="#073784"/>
                                <TextBlock Margin="10,60,0,0" Grid.Column="1" Grid.Row="0" FontSize="13" Text="{Binding Path=Type}" Foreground="#4A708B"/>
                            </Grid>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>

            </DockPanel>
        </Border>
    </Grid>
</UserControl>
